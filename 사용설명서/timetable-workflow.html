<h2>시간표 작성 및 반편성</h2>
<p>기초데이터 설정부터 반편성, 시간표 작성, 학생별 배분까지 <b>8단계</b>로 진행합니다. 각 단계는 순서대로 진행하는 것을 권장하며, 이전 단계의 데이터가 다음 단계에 영향을 줍니다.</p>

<hr>

<h3>Step 1. 개설교과목 편집</h3>
<p>학교 교육과정에 맞는 교과목을 등록합니다.</p>
<ul>
    <li>과목명, 주당 시수, 교과영역을 설정합니다.</li>
    <li>과목 구분을 정확히 선택합니다.</li>
</ul>
<table>
    <tr><th>구분</th><th>설명</th></tr>
    <tr><td><b>일반</b></td><td>모든 학급이 동일하게 수강하는 과목</td></tr>
    <tr><td><b>선택</b></td><td>학생이 희망에 따라 선택하는 과목 (이동수업 대상)</td></tr>
    <tr><td><b>학기교차</b></td><td>1학기/2학기에 번갈아 운영되는 과목</td></tr>
</table>

<hr>

<h3>Step 2. 조사일시 설정</h3>
<p>학생들이 희망 과목을 선택할 수 있는 조사 기간을 설정합니다.</p>
<ul>
    <li>시작일과 종료일을 지정합니다.</li>
    <li>설정된 기간 동안 학생들이 앱에서 과목을 선택합니다.</li>
</ul>

<hr>

<h3>Step 3. 과목 선정 현황</h3>
<p>학생들의 과목 선택 결과를 확인합니다.</p>
<ul>
    <li>학년별 인원, 과목별 수강 희망 인원을 조회합니다.</li>
    <li>수요가 너무 적거나 많은 과목을 파악합니다.</li>
</ul>

<hr>

<h3>Step 4. 수강인원 조정</h3>
<p>과목별 수강인원, 교육반 수, 교사 수요를 조정합니다.</p>
<ul>
    <li>선택과목은 <b>선택군(밴드그룹)</b>을 지정합니다.</li>
    <li>동시에 이동수업할 과목끼리 같은 선택군으로 묶습니다.</li>
    <li>교과간 선택(과학+사회 통합 등)은 하나의 선택군으로 설정합니다.</li>
</ul>
<div class="doc-tip">
    <b>선택군이란?</b> 학생이 그 중에서 과목을 고르는 묶음입니다. 예를 들어 물리학, 화학, 생명과학, 지구과학을 하나의 선택군으로 묶으면 학생은 그 중에서 선택합니다.
</div>

<hr>

<h3>Step 5. 교사 수급 조정</h3>
<p>교사별 담당 학년, 반, 시수를 배정합니다.</p>
<ul>
    <li>각 과목에 담당 교사를 지정하고 시수를 배분합니다.</li>
    <li>교사 충돌(같은 시간에 두 수업 배정)이 발생하지 않도록 주의합니다.</li>
</ul>

<div class="doc-warn">
    <b>필수 확인</b>: 선택군별 <b>교육반 합계</b>가 <b>학급 수의 배수</b>인지 반드시 확인하세요. 이 조건이 맞지 않으면 Step 8에서 오류가 발생합니다.
</div>

<hr>

<h3>Step 6. 반편성</h3>
<p>학년별 학급 수와 정원을 설정하고 자동 반편성을 실행합니다.</p>
<ul class="doc-steps">
    <li>학년별 학급 수, 학급당 정원을 입력합니다.</li>
    <li>제약조건을 등록합니다: 분리(특정 학생 다른 반), 합반, 고정반 등</li>
    <li><b>자동 반편성</b>을 실행합니다.</li>
    <li>결과를 확인하고 <b>반편성 확정</b>을 클릭합니다.</li>
</ul>
<div class="doc-warn">
    반편성을 확정한 후에 Step 7(시간표)를 진행하세요. 반편성이 변경되면 시간표를 다시 생성해야 합니다.
</div>

<hr>

<h3>Step 7. 시간표 작성</h3>
<p>교사 제약조건과 고정교과를 설정한 뒤 시간표를 자동 생성합니다.</p>
<ul class="doc-steps">
    <li>요일별 교시 수를 설정합니다.</li>
    <li>교사별 제약조건(특정 요일/교시 불가 등)을 등록합니다.</li>
    <li>고정교과(체육은 오후 등)를 설정합니다.</li>
    <li><b>전체 자동 생성</b> 버튼으로 시간표를 만듭니다.</li>
    <li>생성 결과를 확인하고 DB에 저장합니다.</li>
</ul>
<div class="doc-tip">
    교사 충돌(한 교사가 같은 교시에 두 수업)이 발생하면 경고가 표시됩니다. 제약조건을 조정하거나 수동으로 교시를 변경하세요.
</div>

<hr>

<h3>Step 8. 학생별 시간표 배분</h3>
<p>선택과목이 있는 학년에서 이동수업 개인 시간표를 생성합니다.</p>
<ul>
    <li>선택군별로 교육반을 <b>밴드</b>에 자동 분배합니다.</li>
    <li>학생을 교육반에 배정합니다.</li>
    <li>배정 완료 후 학생은 <b>나의 시간표</b>에서 이동수업이 포함된 개인 시간표를 확인합니다.</li>
</ul>

<div class="doc-tip">
    선택과목이 없는 학년은 Step 8을 건너뛸 수 있습니다.
</div>

<hr>

<h3>선택과목 밴드 편성 규칙</h3>
<p>Step 8을 정상적으로 실행하려면 아래 규칙이 반드시 충족되어야 합니다.</p>

<h4>핵심 공식</h4>
<p><b>선택군의 교육반 합계 = 학급 수 x 밴드 수</b> (밴드 수는 자연수)</p>

<h4>밴드란?</h4>
<ul>
    <li>같은 시간대에 동시에 운영되는 교육반 그룹입니다.</li>
    <li>선택군 안의 교육반을 학급 수만큼씩 나눈 것이 밴드가 됩니다.</li>
    <li>학생은 각 밴드에서 하나의 교육반에 배정되어 이동수업을 합니다.</li>
</ul>

<h4>올바른 예시 (학급 10개)</h4>
<table>
    <tr><th>선택군</th><th>과목별 교육반</th><th>합계</th><th>결과</th></tr>
    <tr><td>교과간 선택</td><td>8과목 x 5반씩</td><td>40반</td><td>40 / 10 = <b>4밴드</b> (정상)</td></tr>
    <tr><td>수학 선택</td><td>경제수학 5반 + 미적분II 5반</td><td>10반</td><td>10 / 10 = <b>1밴드</b> (정상)</td></tr>
</table>

<h4>잘못된 예시 (학급 10개)</h4>
<table>
    <tr><th>선택군</th><th>과목별 교육반</th><th>합계</th><th>결과</th></tr>
    <tr><td>교과간 선택</td><td>8과목 x 4반씩</td><td>32반</td><td>32 / 10 = 3.2 <b>(오류!)</b></td></tr>
</table>

<div class="doc-warn">
    교육반 합계가 학급 수의 배수가 아니면 Step 8에서 <b>오류가 발생하여 배정을 진행할 수 없습니다.</b> Step 4~5에서 교육반 수를 반드시 조정하세요.
</div>

<hr>

<h3>작업 시 유의사항</h3>
<ul>
    <li>각 단계에서 데이터를 수정한 후 반드시 <b>DB 저장</b>을 클릭하세요.</li>
    <li>Step 6(반편성) 확정 후 Step 7(시간표)를 진행하세요.</li>
    <li>Step 7(시간표) 완료 후 Step 8(학생별 배분)을 실행하세요.</li>
    <li>시간표가 없으면 학생별 배분이 불가능합니다.</li>
</ul>
